<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta charset="utf-8"/>

    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link href="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\..\Scripts\fontawesome\css\font-awesome.min.css" rel="stylesheet"/>
    <link href="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\Theme.css" rel="stylesheet"/>


    <script src="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\..\Scripts\jquery.min.js"></script>
    <!--<link href="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\..\Scripts\highlightjs\styles\vs.css" rel="stylesheet"/>-->
    <!--<script src="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\..\Scripts\highlightjs\highlight.pack.js"></script>-->
    <script src="file:///C:\Users\alumno\AppData\Local\Markdown Monster\PreviewThemes\Pdf Output\..\Scripts\preview.js" id="PreviewScript"></script>

    

</head>
<body>
<div id="MainContent">
  <!-- Markdown Monster Content -->
  <h1 id="tarea-3---almacenamiento-en-docker---iesgn">Tarea 3 - Almacenamiento en Docker - IESGN</h1>
<blockquote>
<p>Realizado por Pablo R.</p>
</blockquote>
<p><strong>Vamos a trabajar con volúmenes docker:</strong></p>
<ul>
<li><p><strong>1. Crear un volumen docker que se llame miweb.</strong></p>
<pre><code class="language-sh">    docker volume create miweb
</code></pre>
<p><img src="assets/ejercicio1.PNG" alt="" /></p>
<p>Creamos el volumen mi web.</p>
</li>
<li><p><strong>2. Crea un contenedor desde la imagen php:7.4-apache donde montes en el directorio/var/www/html (que sabemos que es el DocumentRoot del servidor que nos ofrece esa imagen) el volumen docker que has creado.</strong></p>
<pre><code class="language-sh">    docker run -d -p 80:80 --name apache-php2 -v miweb:/var/www/html php:7.4-apache
</code></pre>
<p><img src="assets/ejercicio2.PNG" alt="" /></p>
<p>Creamos el php asociado al volumen miweb.</p>
</li>
<li><p><strong>3. Utiliza el comando docker cp para copiar un fichero index.html en el directorio /var/www/html.</strong></p>
<pre><code class="language-sh">    nano /home/daw/index.html
    docker cp /home/daw/index.html apache-php2:/var/www/html
</code></pre>
<p><img src="assets/ejercicio3.PNG" alt="" /></p>
<p><img src="assets/ejercicio3-1.PNG" alt="" /></p>
<p>Creamos el archivo index.html en nuestro equipos con nano y copiamos dicho fichero a la máquina docker.</p>
</li>
</ul>
<p>Copiamos el archivo index.html al contenedor.</p>
<ul>
<li><p><strong>4. Accede al contenedor desde el navegador para ver la información ofrecida por el fichero index.html.</strong></p>
<pre><code class="language-sh">    docker start apache-php2
</code></pre>
<p><img src="assets/ejercicio4.PNG" alt="" />
<img src="assets/ejercicio4-1.PNG" alt="" /></p>
<p>Iniciamos el contenedor y accedemos por el navegador.</p>
</li>
<li><p><strong>5. Borra el contenedor</strong></p>
<pre><code class="language-sh">docker stop &lt;id_contenedor&gt;
docker rm &lt;id_contenedor&gt;
</code></pre>
<p><img src="assets/ejercicio5.PNG" alt="" /></p>
<p>Paramos el contenedor y eliminamos el contenedor.</p>
</li>
<li><p><strong>6. Crea un nuevo contenedor y monta el mismo volumen como en el ejercicio anterior.</strong></p>
<pre><code class="language-sh">    docker run -d -p 80:80 --name apache-php3 -v miweb:/var/www/html php:7.4-apache
</code></pre>
<p><img src="assets/ejercicio6.PNG" alt="" /></p>
<p>Creamos un nuevo contenedor y montamos el mismo volumen del ejercicio anterior.</p>
</li>
<li><p><strong>7. Accede al contenedor desde el navegador para ver la información ofrecida por el fichero index.html. ¿Seguía existiendo ese fichero?</strong></p>
<p><img src="assets/ejercicio7.PNG" alt="" /></p>
<p>Sigue existiendo pues reutilizamos el volumen anterior.</p>
<p><strong>Vamos a trabajar con bind mount:</strong></p>
</li>
<li><p><strong>1. Crea un directorio en tu host y dentro crea un fichero index.html.</strong></p>
<pre><code class="language-sh">    mkdir /home/daw/miweb2
    nano /home/daw/miweb2/index.html
</code></pre>
<p><img src="assets/ejercico1b.PNG" alt="" />
<img src="assets/ejercicio1b-2.PNG" alt="" /></p>
<p>Creamos el directorio y el fichero index.</p>
</li>
<li><p><strong>2. Crea un contenedor desde la imagen php:7.4-apache donde montes en el directorio/var/www/html el directorio que has creado por medio de bind mount.</strong></p>
<pre><code class="language-sh">    docker run -d -p 80:80 --name apache-php4 -v /home/daw/miweb2:/var/www/html php:7.4-apache
</code></pre>
<p>Creamos el contenedor con bind mount.</p>
<p><img src="assets/ejercicio2b.PNG" alt="" /></p>
</li>
<li><p><strong>3. Accede al contenedor desde el navegador para ver la información ofrecida por el fichero index.html.</strong></p>
<p><img src="assets/ejercicio3b.PNG.jpg" alt="" /></p>
<p>Accedemos a la web y observamos que tenemos la web funcionando.</p>
</li>
<li><p><strong>4. Modifica el contenido del fichero index.html en tu host y comprueba que al refrescar lapágina ofrecida por el contenedor, el contenido ha cambiado.</strong></p>
<pre><code class="language-sh">    nano /home/daw/miweb2/index.html
</code></pre>
<p><img src="assets/ejercicio4b.PNG" alt="" /></p>
<p><img src="assets/ejercicio4b-1.PNG" alt="" /></p>
<p>Modificamos el archivo en el host.</p>
<p><img src="assets/ejercicio4b-2.PNG" alt="" /></p>
<p>Observamos el cambio.</p>
</li>
<li><p><strong>5. Borra el contenedor</strong></p>
<pre><code class="language-sh">    docker stop &lt;id_contenedor&gt;
    docker rm &lt;id_contenedor&gt;
</code></pre>
<p><img src="assets/ejercicio5b.PNG" alt="" /></p>
<p>Borramos el contenedor.</p>
</li>
<li><p><strong>6. Crea un nuevo contenedor y monta el mismo directorio como en el ejercicio anterior.</strong></p>
<pre><code class="language-sh">    docker run -d -p 80:80 --name apache-php5 -v /home/daw/miweb2:/var/www/html php:7.4-apache
</code></pre>
<p><img src="assets/ejercicio6b.PNG" alt="" /></p>
<p>Creamos el contenedor de nuevo.</p>
</li>
<li><p><strong>7. Accede al contenedor desde el navegador para ver la información ofrecida por el ficheroindex.html. ¿Se sigue viendo el mismo contenido?</strong></p>
<p><img src="assets/ejercicio7b.PNG" alt="" /></p>
<p>Observamos que el contenido se sigue visualizando.</p>
</li>
</ul>

<div style="margin-top: 30px;margin-bottom: 10px;font-size: 0.8em;border-top: 1px solid #eee;padding-top: 8px;cursor: pointer;"
     title="This message doesn't display in the registered version of Markdown Monster." onclick="window.open('https://markdownmonster.west-wind.com')">
    <img src="https://markdownmonster.west-wind.com/favicon.png"
         style="height: 20px;float: left; margin-right: 10px;"/>
    created with the evaluation version of
    <a href="https://markdownmonster.west-wind.com"
       target="top">Markdown Monster</a>
</div>

  <!-- End Markdown Monster Content -->
</div>

</body> 
</html>
